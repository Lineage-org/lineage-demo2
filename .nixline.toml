# .lineage.toml - Configuration-driven Lineage consumption
# This file demonstrates advanced customization without forking the baseline
# Use 'nix run github:Lineage-org/lineage-baseline#list-licenses' to see available license types

[baseline]
repo = "github:Lineage-org/lineage-baseline"
ref = "stable"

[organization]
# Organization configuration - automatically replaces template variables
name = "Lineage-org"
security_email = "security@lineage.org"
default_team = "@Lineage-org/maintainers"

[packs]
# Selective pack enablement - choose which policies to adopt
enabled = [
  "editorconfig",
  "codeowners",
  "security",
  "license",
  "precommit"
  # Note: excluded "dependabot" to show selective adoption
]

# Pack-specific customization

[packs.editorconfig]
# Custom coding standards for AcmeCorp
indent_size = 2
line_length = 80
charset = "utf-8"
end_of_line = "lf"
trim_trailing_whitespace = true
insert_final_newline = true

# Language-specific overrides
[packs.editorconfig.languages]
python = { indent_size = 4, max_line_length = 88 }
javascript = { indent_size = 2 }
yaml = { indent_size = 2 }
markdown = { indent_size = 2 }

[packs.codeowners]
# Custom ownership rules for Lineage-org structure
rules = [
  { pattern = "*", owners = ["@Lineage-org/maintainers"], comment = "Default owners" },
  { pattern = "*.py", owners = ["jasonodoom"], comment = "Python code" },
  { pattern = "*.{js,jsx,ts,tsx}", owners = ["jasonodoom"], comment = "Frontend code" },
  { pattern = "*.{java,kt,scala}", owners = ["@Lineage-org/maintainers"], comment = "JVM languages" },
  { pattern = "*.rs", owners = ["@Lineage-org/maintainers"], comment = "Rust code" },
  { pattern = "docs/**", owners = ["jasonodoom"], comment = "Documentation" },
  { pattern = ".github/**", owners = ["jasonodoom"], comment = "CI/CD and workflows" },
  { pattern = "*.nix", owners = ["jasonodoom"], comment = "Nix expressions" },
  { pattern = "Dockerfile*", owners = ["jasonodoom"], comment = "Container configurations" },
  { pattern = "*.toml", owners = ["jasonodoom"], comment = "Configuration files" }
]

[packs.security]
# Security policy tailored to Lineage-org requirements
response_time = "within 2 business days"
disclosure_policy = "coordinated"

# Version support matrix
supported_versions = [
  { version = "1.x.x", supported = true },
  { version = "0.9.x", supported = true },
  { version = "< 0.9", supported = false }
]

[packs.license]
# License configuration with SPDX fetching
type = "Apache-2.0"
holder = "Lineage Contributors"
year = "2024"
fetch_from_source = true  # Fetch from SPDX (default)
# custom_license_file = "./custom-license.txt"  # For custom licenses

[packs.precommit]
# Pre-commit configuration for Lineage-org standards
hooks = [
  "trailing-whitespace",
  "end-of-file-fixer",
  "check-yaml",
  "check-json",
  "check-toml",
  "black",
  "flake8",
  "prettier",
  "eslint"
]

# Language-specific settings
python_version = "3.11"
black_line_length = 88
node_version = "18"