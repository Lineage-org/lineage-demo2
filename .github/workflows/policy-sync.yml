name: Policy Sync

on:
  schedule:
    # Weekly on Sunday at 2 PM UTC
    - cron: '0 14 * * 0'
  workflow_dispatch:

permissions:
  contents: write
  issues: write
  pull-requests: write

jobs:
  sync:
    uses: Lineage-org/.github/.github/workflows/lineage-policy-sync-smart.yml@stable
    with:
      consumption_pattern: configuration-driven
      baseline_repo: Lineage-org/lineage-baseline
      baseline_ref: main
      prefer_pr: false         # Try direct push first
      auto_merge: true         # Enable auto-merge if PR created
      stagger_minutes: 5       # Random delay to prevent rate limits